--- 
title: "Missing Middle Housing Targets"
author: "YIMBY Melbourne"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
url: https://targets.yimby.melbourne/
documentclass: book
bibliography: [book.bib, packages.bib]
# url: https://targets.yimby.melbourne/
# cover-image: path to the social sharing image like images/cover.jpg
description: |
  Melbourne's planning system is broken. We need evidence-driven 
  and well-enforced housing targets in order to fix this ongoing crisis.
link-citations: yes
# github-repo: rstudio/bookdown-demo
output:
  includes:
    in_header: header.html
  
---
# Missing Middle Housing Targets

```{r setup, include=FALSE}

knitr::opts_chunk$set(message = FALSE, warning = FALSE, error = FALSE, echo = FALSE, dpi = 300,fig.width = 7, fig.height = 4)
#knitr::opts_knit$set(root.dir= '../')   
knitr::opts_chunk$set(dev.args=list(bg='transparent'))

# Corrected function to generate a button with customizable text and link
generateButton <- function(text, link) {
  buttonHTML <- paste0('<div class="button-row"><div style="opacity: 1; transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg); transform-style: preserve-3d;" class="button-wrapper"><a href="', link, '" class="button-fullwidth-2 w-inline-block"><div style="width: 0%; height: 2px;" class="bottom-line-2"></div><div style="height: 0%; width: 2px;" class="left-line-2"></div><div style="width: 0%; height: 2px;" class="top-line-2"></div><div style="height: 0%; width: 2px;" class="right-line-2"></div><div style="height: 0%; width: 538.617px;" class="overlay-colr-button-2"></div><div style="color: rgb(0, 0, 0);" class="button-text">', text, '</div></a></div></div>')
  cat(buttonHTML)
}

# Use the function to generate buttons
knitr::opts_chunk$set(message = FALSE, warning = FALSE, error = FALSE, echo = FALSE, dpi = 300, fig.width = 7, fig.height = 4)

all_zoned_numbers <- lga_zoning_numbers %>% summarise(across(is.numeric, sum))

mm_zoned_capacity <- all_zoned_numbers %>% pull(mm_zoned_capacity) 
total_zoned_capacity <- prettyNum(round(mm_zoned_capacity,-4),big.mark = ",") 

mm_zone_change <- all_zoned_numbers$mm_zoned_capacity/all_zoned_numbers$zoned_capacity

multiplier <- paste0(round(mm_zone_change,1),"x")

```

## Overview

Melbourne is growing. Our city's urgent need for more homes has been acknowledged by industry, policy, and government bodies alike. And yet most of the policy implemented to-date has been edge-tinkering: granny flats, Future Homes, and the scattered beginnings of outer-urban activity centres.

Since the introduction of [Plan Melbourne](https://www.planning.vic.gov.au/guides-and-resources/strategies-and-initiatives/plan-melbourne), the city has relegated liveable density to a tiny number of "activity centres" on the city's most polluted, noisy, and dangerous streets. Meanwhile, the best blocks of land—those located on safer streets and near parks, schools, and public transport—have been locked up under restrictive zoning and overlays, enforced by local governments on behalf of their most wealthy residents. 

This status quo keeps both big developers and NIMBYs happy—but it’s inequitable, and it's making our city less liveable. 

For Melbourne to remain a truly world-leading city, we need to permit gentle density across all of its most amenity-rich and productive regions, enabling new human-scale homes to be built in areas where people want to live. And people don't just want to live within a handful of arbitrarily-defined activity centres. Rather, they want to live across the entirety of the city, within an interconnected network of 20-minute neighbourhoods across all 1,992 of Melbourne's tram stops and train stations.

Here, we expand upon the work already completed within our 2023 flagship report, _[Melbourne's Missing Middle](http://yimby.melbourne/missing-middle)_, which lays out the overwhelming evidence of densification's social, environmental, and affordability benefits. 

This report aims to codify these benefits by outlining a new housing delivery paradigm across the 19 inner-city Melbourne councils where demand for denser living is highest. 

YIMBY Melbourne's missing middle reforms will introduce [fairer missing middle zoning](#report-link), underpinned by [enforced housing targets](#report-link) for [each local council](#report-link), ensuring that abundant housing is created city-wide, and for everyone.

## Key policy proposals

1. Upzone inner-middle Melbourne, increasing zoned capacity by `r multiplier` to `r total_zoned_capacity` homes
2. Calculate annual housing targets for the 19 LGAs where demand for housing is highest
3. Enforce housing targets through revenue-neutral 'carrot and stick' incentives
4. Deliver 40,000 new homes per year across inner-middle Melbourne

## Annual housing targets {.tabgroup}

### Map 
```{r,fig.height=7,fig.width = 8}

map_data <- strayr::read_absmap("lga2022") %>% 
  filter(state_name_2021 == "Victoria") %>% 
    mutate(lga_name_2022 = str_remove_all(lga_name_2022, "\\s*\\(.*?\\)\\s*")) %>% 
    mutate(lga_name_2022 = if_else(lga_name_2022 == "Moreland","Merri-bek",lga_name_2022)) %>%  # Moreland changed name in 2021
  inner_join(lga_zoning_numbers) 

#devtools::install_github("yutannihilation/ggsflabel")
map_data%>% 
  mutate(target = paste0(lga_name_2022,"\n",
                         prettyNum(round(mm_target,-2),
                                   big.mark = ","),
                         " homes")
         ) %>% 
  ggplot()+
  geom_sf(colour = yimby_colours$green_palette[4])+
  ggthemes::theme_map()+
  ggsflabel::geom_sf_label_repel(aes(label = target ),
                                 size = 2,
                                 fill = yimby_colours$background)+
    labs(title = "Missing Middle Melbourne yearly housing targets",
         x = element_blank(),
         y = element_blank()) +
  theme_yimby_mel_caption(text_size = "small",plot_type = "map")+
  theme(plot.margin = margin(2, 15,2, 15))+
  theme(panel.background = element_rect(fill = "transparent", colour = NA),  
        plot.background = element_rect(fill = "transparent", colour = NA))


```

### Table
```{r}

dwellings_by_type <- df_mel_props %>%
  group_by(category) %>% 
  summarise(n = n(),
            lot_size = sum(lot_size),
            .groups = "drop") %>% 
  group_by(category) %>% 
  mutate(n_total = sum(n),
         lot_size_total = sum(lot_size))  %>% 
  ungroup() %>%
  mutate(zone_type = "Existing zoning")

dwellings_by_mm_type <- df_mel_props %>%
  group_by(category_new) %>% 
  summarise(n = n(),
            lot_size = sum(lot_size),
            .groups = "drop") %>% 
  group_by(category_new) %>% 
  mutate(n_total = sum(n),
         lot_size_total = sum(lot_size))  %>% 
  ungroup() %>%
  mutate(zone_type = "YIMBY Melbourne Zoning") %>%
  rename(category = category_new)

library(scales)

dwellings_by_type %>% 
  bind_rows(dwellings_by_mm_type) %>% 
  ungroup() %>%
    mutate(category = fct_relevel(category,"Low density residential")) %>% 
  filter(!(category %in% c("Housing not permitted","Civic use makes development less likely","Already developed"))) %>% 
  ggplot(aes(x = category, 
             y = n))+
  coord_flip()+ 
  geom_bar(stat = "identity")+
  theme_yimby_mel_caption(text_size = "small",plot_type = "bar",colour_scale = "light_dark") +
  labs(x = element_blank(),
       title = paste0("Building heights on Melbourne's residential properties"),
       y = "Number of properties",
       fill = "Heritage status") +
  facet_wrap(~zone_type) +
  scale_y_continuous(labels = scales::number_format(scale_cut = cut_short_scale()))

```

<!--chapter:end:index.Rmd-->

# Missing middle upzoning 

As detailed in _[Melbourne's Missing Middle](https://yimbymelbourne.org.au/missing-middle)_, broad upzoning is the best, most equitable approach to creating housing abundance for all. Our proposed city-wide upzoning is focused around Melbourne's extensive train and tram networks, with the goal of enabling more people to utilise our city's existing infrastructure, and to live in the places that enable them to experience the best Melbourne has to offer. 


## How zoning will change

We have taken existing zoning controls, and upzoned accordingly:

1. All lots within lower-density residential zones (including Neighbourhood Residential Zone (NRZ) and General Residential Zone (GRZ)) within 500m of a tram stop or 1km of a train station are rezoned to the six-storey Missing Middle Zone (MMZ).
2. Any lot in a General Residential Zone not near trams or trains is rezoned RGZ, but parking minimums remain unless council states otherwise. 
3. Any lot in a Neighbourhood Residential Zone not near trams or trains is rezoned GRZ, but parking minimums remain unless council states otherwise. 

The effect of these changes will be to upzone much of Melbourne's land, allowing more homes to be built within existing communities. 

```{r}

dwellings_by_type <- df_mel_props %>%
  group_by(category) %>% 
  summarise(n = n(),
            lot_size = sum(lot_size),
            .groups = "drop") %>% 
  group_by(category) %>% 
  mutate(n_total = sum(n),
         lot_size_total = sum(lot_size))  %>% 
  ungroup() %>%
  mutate(zone_type = "Existing zoning")

dwellings_by_mm_type <- df_mel_props %>%
  group_by(category_new) %>% 
  summarise(n = n(),
            lot_size = sum(lot_size),
            .groups = "drop") %>% 
  group_by(category_new) %>% 
  mutate(n_total = sum(n),
         lot_size_total = sum(lot_size))  %>% 
  ungroup() %>%
  mutate(zone_type = "YIMBY Melbourne Zoning") %>%
  rename(category = category_new)

library(scales)

dwellings_by_type %>% 
  bind_rows(dwellings_by_mm_type) %>% 
  ungroup() %>%
    mutate(category = fct_relevel(category,"Low density residential")) %>% 
  filter(!(category %in% c("Housing not permitted","Civic use makes development less likely","Already developed"))) %>% 
  ggplot(aes(x = category, 
             y = n))+
  coord_flip()+ 
  geom_bar(stat = "identity")+
  theme_yimby_mel_caption(text_size = "small",plot_type = "bar",colour_scale = "light_dark") +
  labs(x = element_blank(),
       title = paste0("Building heights on Melbourne's residential properties"),
       y = "Number of properties",
       fill = "Heritage status") +
  facet_wrap(~zone_type) +
  scale_y_continuous(labels = scales::number_format(scale_cut = cut_short_scale()))

```

```{r}
tbl_body  <- lga_zoning_numbers %>% 
  select(` ` = lga_name_2022,
         `Current zoned capacity` = zoned_capacity,
         #`(Excluding heritage)` = zoned_capacity_heritage,
         `New zoned capacity under Missing Middle` = mm_zoned_capacity,
         `Increase in zoned capacity` = change_to_zoned_capacity) %>% 
  arrange(desc(`Increase in zoned capacity` ))

total = tbl_body %>% 
  summarise(`Current zoned capacity` = sum(`Current zoned capacity`),
            `New zoned capacity under Missing Middle` = sum(`New zoned capacity under Missing Middle`)) %>% 
  mutate(`Increase in zoned capacity` = `New zoned capacity under Missing Middle`/`Current zoned capacity`,
         ` ` = "Total")
tbl_body %>%
  bind_rows(total) %>% 
  mutate( `Increase in zoned capacity` = paste0(round(`Increase in zoned capacity`,1),"x")) %>% 
  gt() %>% 
  fmt_number(c(`Current zoned capacity`,
               `New zoned capacity under Missing Middle`),n_sigfig = 3) %>% 
tab_options(
    table.background.color = yimby_colours$background# Change "lightblue" to any color you prefer
  ) %>% 
    tab_style(
    style = list(
      cell_text(weight = "bold")
    ),
    locations = cells_body(
      rows = everything() %>% tail(1)
    )
  )
```


## Introducing the Missing Middle Zone

The Missing Middle Zone (MMZ) will enable 6 storey buildings to be built within walking distance of every train station and tram stop in Melbourne. This zone will support the density levels that underpin great and iconic cities across the world, with beautiful street walls free of onerous setback rules, activating the streets below. 

This new zone is a refinement of the existing Residential Growth Zone (RGZ), and has been altered in four key ways. The MMZ:

* Implements a default maximum height of 21 metres or 6 storeys, an increase from the RGZ’s current 4-storey default.
* Expands non-residential land uses to include a wider range of neighbourhood  services & amenities.
* Abolish car parking minimums.
* Exempts from notice and review developments of any total value containing at least 10% public or community housing in perpetuity

MMZ areas will be entirely mixed-use, and buildings across the area will be permitted by-right to include neighbourhood services and amenities, cafes, libraries, and shops on the ground floor. Off-street parking will be allowed, but thanks to the absence of parking minimums, nobody will be forced to buy a car park that they don't need. 

![**NOTE: Hero 1.**](../atlas/mm housing.jpeg)


## Stepwise upzoning for housing diversity

Not all of Melbourne's suburbs have access to rail infrastructure but many still benefit from nearby schools, hospitals and bus routes. Local communities and businesses that aren’t as closely situated to Melbourne’s vast train and tram networks also deserve to reap the densification benefits the Missing Middle reforms will provide. 

Inspired by the success of Auckland’s zoning reforms, the Missing Middle reform will completely eliminate the Neighbourhood Residential Zone (NRZ) across metropolitan Melbourne, replacing it with General Residential Zone (GRZ). In turn, all land currently zoned GRZ will also be upzoned to the Residential Growth Zone (RGZ).

![**NOTE: Hero 2.**](../atlas/mm housing.jpeg)


## The importance of excess zoned capacity

Under the current system, the zoned capacity of each LGA is kept only barely higher than the number of homes that need to be built. 

This has two key problems: 

1. limiting housing development, and
2. encouraging land speculation.


### Zoned capacity & housing development

In order to ensure enough housing supply is delivered to meet demand, it is important to create a significant excess of zoned capacity. It is impractical to think that every potential lot will be built to its maximum zoned capacity within a reasonable timeframe. This is because lots are heterogeneous, and development potential can be limited by any number of factors including:

* impractical size or location 
* heritage or character protections
* vital community or commercial functions
* ownership structures that make sale to developers unlikely 

In addition to the above, zoning often limits the yield of land such that it is impossible to undertake a densification development that stacks up financially. A key problem with restrictive zoning in general is that it is non-responsive to land prices, and broadly ambivalent to market realities. 


### Zoning capacity & land speculation

This leads to the second problem with limiting zoned capacity: it incentivises land speculation and landbanking. This is because large areas of restrictive zoning enables a small number of actors to feasibly gain control of the bulk of lots available and viable for development. However, if developable land is made abundantly available through broad upzoning, any and all landbanking becomes entirely infeasible. 

For all these reasons and more, a system that relies on a majority of zoned capacity being developed is not a serious system. Through broad upzoning, we can increase the likelihood that enough homes will be built across our city, and reduce landbanking. This is the best possible way to lower housing costs across our city, and enable more people to live in the places best suited to their wants and needs.

<!--chapter:end:01-missing_middle_upzoning.Rmd-->

# Inner-city housing targets

```{r,fig.height=7,fig.width = 8}

map_data <- strayr::read_absmap("lga2022") %>% 
  filter(state_name_2021 == "Victoria") %>% 
    mutate(lga_name_2022 = str_remove_all(lga_name_2022, "\\s*\\(.*?\\)\\s*")) %>% 
    mutate(lga_name_2022 = if_else(lga_name_2022 == "Moreland","Merri-bek",lga_name_2022)) %>%  # Moreland changed name in 2021
  inner_join(lga_zoning_numbers) 

#devtools::install_github("yutannihilation/ggsflabel")
map_data%>% 
  mutate(target = paste0(lga_name_2022,"\n",
                         prettyNum(round(mm_target,-2),
                                   big.mark = ","),
                         " homes")
         ) %>% 
  ggplot()+
  geom_sf(colour = yimby_colours$green_palette[4])+
  ggthemes::theme_map()+
  ggsflabel::geom_sf_label_repel(aes(label = target ),
                                 size = 2,
                                 fill = yimby_colours$background)+
    labs(title = "Missing Middle Melbourne yearly housing targets",
         x = element_blank(),
         y = element_blank()) +
  theme_yimby_mel_caption(text_size = "small",plot_type = "map")+
  theme(plot.margin = margin(2, 15,2, 15))+
  theme(panel.background = element_rect(fill = "transparent", colour = NA),  
        plot.background = element_rect(fill = "transparent", colour = NA))


```



The great majority of Victoria's new housing should be built in high-amenity and infrastructure-rich areas. These are the places where the demand for density is highest, and where that density can be supported. 

As such, we have allocated half of Victoria's [annual target of 80,000 new dwellings](https://content.vic.gov.au/sites/default/files/2023-09/DTP0424_Housing_Statement_v6_FA_WEB.pdf) to 19 amenity- and infrastructure-rich inner-city LGAs.

The selected LGAs are where our modelling indicates that demand for denser living is high, and where supply by the private market will therefore be most viable. Our modelling allocates a total of 40,000 homes per year across these LGAs based on development viability.

Targets are highest in places like [Boroondara](/lga/boroondara) where density is low due high numbers of single-family homes on large lots near public transport, where there is strong demand for apartments. 

Targets are lower in areas such as [Maribyrnong](/lga/maribyrnong), where apartments sell for much less and missing middle housing is therefore harder to build. 

There are also some areas like [Port Phillip](/lga/port-phillip), where demand for missing middle housing is high and yet there simply isn't enough suitable land to build missing middle housing. 

More housing could potentially be provided in these LGAs through rezoning of well-located industrial and commercial land. However, for the purposes of this report, we are only considering land on which housing is currently permitted.

## Why Melbourne needs targets

Put simply, Melbourne needs housing targets because it needs more housing.

With the exception of the [City of Melbourne](/lga/melbourne-city), inner- and middle-ring councils are currently not doing enough to house Melbourne's future population. This has contributed to the city's high reliance on greenfield development, which has seen more and more Melburnians pushed out toward our urban fringe. 

```{r fig.height = 8}

pop_change_by_lga <-lga_pop_change_importer(lgas) %>% 
  filter(year == 2022)

pop_change_by_lga %>% 
  mutate(type = if_else(lga_name_2021 == "All of Melbourne","y","n"),
         lga_name_2021 = if_else(lga_name_2021 == "Melbourne","City of Melbourne",lga_name_2021)) %>% 
  ungroup() %>% 
  mutate(change = change - 1, 
         lga_name_2021 = fct_reorder(lga_name_2021,change)) %>% 
  ggplot(aes(x = lga_name_2021, 
             y = change,
             fill = type))+
  geom_bar(stat = "identity")+
  coord_flip()+
  theme_yimby_mel_caption("Source: ABS regional populations",text_size = "small")+
  labs(title = "Middle and inner-suburban suburbs are not keeping up with\nMelbourne's need for more housing",
       subtitle = "Population change 2014-2022 (%)",
       y = element_blank(),
       x = element_blank())+
  scale_y_continuous(labels = percent_format(accuracy = 1))+
  theme(legend.position = "none")+
  geom_hline(yintercept = 0)
```

The land use patterns that our city needs—dense housing in high-amenity areas, within highly walkable neighbourhoods—are largely absent. That is because, broadly, it is banned from being built. As such, the best way to increase density across our city is to make density legal to build across our city. 

Melbourne's Missing Middle Housing Targets should be updated by the government every year, and if apartment prices fall relative to other areas, then the housing target will automatically fall as it will become clear that development is no longer profitable in that area.

The best way for a LGA to reduce its target is to make housing cheaper. And the best way to make housing cheaper is to make it abundant. 

This system of enforced housing targets is designed to create a virtuous cycle that drives down prices across the entire city, creating a more affordable and equitable Melbourne for all.

## Calculating targets

A housing target for any area is useless without two key things. First, you need strong demand for more housing. And second, you need land available for development.

It's common practice for planners to calculate "zoned capacity" which is the theoretical number of homes that could be built across an LGA if every lot were developed to maximum permitted density. We have already outlined the problems with a reliance on zoned capacity [earlier in this report](#report-link). 

To account for these problems, our model accounts not just for an increase in zoned capacity, but also for the viability of development in each LGA, accounting for demand, prices, and development costs. 

To do this, we have used a precise seven-stage methodology: 

1. Sites that are parks, schools, hospitals, or already have apartments are excluded.
2. Potential yield for MMZ lots is calculated. Any lot zoned "Missing Middle" is considered suitable for 6 storeys of housing with high lot coverage. The potential yield of these properties is calculated based on the yield achieved by 6 storey Nightingale developments in Melbourne.
3. Potential yield for RGZ, GRZ, and NRZ lots is calculated. This is based on the density calculated by [Professor Michael Buxton](https://cur.org.au/project/melbourne-8-million-matching-land-supply-dwelling-demand/).
4. Costs are calculated. For each lot, the cost of demolishing the existing home is calculated, plus the cost of building 85 square-metre GFA apartments in its place. Taller buildings are considered more expensive to construct owing to increased structural requirements. Because the Residential Growth Zone has parking requirements, the cost of underground car parking was added to construction costs for lots in this zone. The full cost calculation formula is available [here](https://github.com/yimbymelbourne/missing_middle_2/blob/main/R/functions/find%20profitable_apartments_for_zoning_targets.R).  
5. The value of existing properties is calculated. This uses a regression of past house sale prices against features of the land such as the current zone, lot size, distance from CBD, SA3, and distance from public transport. The full regression terms are available [here](https://github.com/yimbymelbourne/missing_middle_2/blob/main/R/R_regressions/03run_regression.R). 
6. The likely price of apartments sold in a development on a given lot is calculated. This uses a similar regression as above. 
7. Profitability is calculated. For each site, the profitability of a development was calculated at various heights within Missing Middle zoning. Each site where calculated profit is greater than 0 contributes to that LGA's housing target. 

Our model does not expect development to occur on every viable site. But councils with more viable sites are allocated a higher share of our total inner-Melbourne housing target of 40,000.  


## Enforcing targets

There's currently no mechanism to ensure that councils actually build the housing for which they claim to have zoned capacity. The Victorian Government should follow the advice of [Infrastructure Victoria](#) and the [Productivity Commission](#) recommendations to enforce housing targets through attaching carrots and sticks to housing targets. 

To deliver a high number of well-located homes across Melbourne requires more than just non-binding capacity targets that look good on paper. Rather, we need binding material construction targets that look good in real life. People do not live inside housing capacity; they live inside houses. And Councils must be kept accountable to that fact.


### Carrots

LGAs who meet or exceed their housing targets should be given financial rewards by the State Government.

In order to generate the revenue required for these rewards, the state should levy a Windfall Gains Tax upon the first sale of any upzoned residential property after upzoning has taken place. This tax is outlined in YIMBY Melbourne's 2023 report, [*Melbourne's Missing Middle*](https://yimby.melbourne/missing-middle), and is based on an conservative assumption that upzoning will raise a given property's value by 4%, thanks to the increased capacity for development. We propose taxing 30% of this 4% improvement.

```MMM WGT Chart```

For a house worth \$1m, a 4% improvement is \$40,000. \$12,000 of that uplift should be paid in tax, with the owner keeping the remaining \$28,000 windfall gain. Our model proposes the upzoning of **X** properties total, with the WGT to be applied at first sale, regardless of the timing of the transfer. With the median value of houses in the area covered by this report at Y, we estimate a revenue of \$**Z** billion over the lifespan of Plan Melbourne 2050. 

A minimum of 70% of this revenue should be hypothecated to social housing builds. A portion of remaining revenue should be used to reward councils who exceed their housing targets, paid out annually and used by those councils to improve infrastructure and services for the people who live there. 

This reward could be additionally supplemented through State Government distribution of the Commonwealth's New Home Bonus to the councils in which homes are built in excess of their respective targets. 

Furthermore, the council rate cap should be abolished to empower councils to make more proactice decisions regarding expanding local infrastructure and services.


### Sticks

Councils that fail to meet their housing targets three years in a row should receive a financial penalty. 

This could take several forms. We outline three basic kinds of incentives below:



1. Councils that fail to meet their targets should be required to pay an annual 'Housing Remedy' to the state government. The proceeds of this should be hypothecated toward Homes Victoria (the state government housing agency). To increase political salience of the 'Housing Remedy', we suggest it take the form of a line-item added to every ratepayer's annual bill. 
2. Councils that fail to meet their targets should be made ineligible for select tranches of state government infrastructure grants until they course-correct. 
3. Councils that fail to meet their targets should have councillor call-in powers suspended. All planning applications should then be delegated to council staff.


## Notes on failing targets


### Due to prevailing market conditions

Targets should be tracked consistently through a combination of development and building approvals, commencements and completions. In the case that a council believes its target was not met due to external factors, they should be able to appeal the penalty. 


### Due to existing development controls and overlays

Existing heritage, neighbourhood character, and design and development overlays in place over large swathes of our inner-suburbs should not be an excuse for councils to miss their housing targets. Councils with far-reaching overlays will need to consider how best to achieve their housing targets against the tradeoffs associated with maintaining high opportunity-cost overlays.

If heritage is a barrier to growth then `rtodo area_name` has three options:

1. Adjust heritage controls to allow more density on heritage and character land
2. Remove controls from properties of low heritage or character value
3. Increase zoned density further in non-heritage and character areas to allow adequate housing growth while maintaining heritage areas
4. Be subject to the [Housing Remedy](#report-link)

<!--chapter:end:02-inner_city_Housing_targets.Rmd-->

# LGA housing targets (Template)

```{r}

# knitr::opts_chunk$set(message = FALSE, warning = FALSE, error = FALSE, echo = FALSE, dpi = 300,fig.width = 7, fig.height = 4)
# knitr::opts_knit$set(root.dir= '../')   

parcels <- prettyNum(nrow(df_lga_props),big.mark = ",")

fois <- df_lga_props %>% 
  filter(feature_preventing_development) %>% 
  nrow()%>% 
  prettyNum(big.mark = ",")
  
bad_zoning <- df_lga_props %>% 
    filter(!feature_preventing_development) %>% 
  group_by(zoning_permits_housing) %>% 
  summarise(n=n()) %>% 
  filter(zoning_permits_housing == "Housing not generally permitted") %>% 
  pull(n) %>% 
  prettyNum(big.mark = ",")

already_developed <- df_lga_props %>% 
  filter(zoning_permits_housing == "Housing permitted",
         !feature_preventing_development,
         dwellings_est>1) %>%
  nrow()%>% 
  prettyNum(big.mark = ",")


df_lga_useful_props_num <-  prettyNum(nrow(df_lga_useful_props),big.mark = ",")

mcg_size <- 20000 

# Corrected function to generate a button with customizable text and link
generateButton <- function(text, link) {
  buttonHTML <- paste0('<div class="button-row"><div style="opacity: 1; transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg); transform-style: preserve-3d;" class="button-wrapper"><a href="', link, '" class="button-fullwidth-2 w-inline-block"><div style="width: 0%; height: 2px;" class="bottom-line-2"></div><div style="height: 0%; width: 2px;" class="left-line-2"></div><div style="width: 0%; height: 2px;" class="top-line-2"></div><div style="height: 0%; width: 2px;" class="right-line-2"></div><div style="height: 0%; width: 538.617px;" class="overlay-colr-button-2"></div><div style="color: rgb(0, 0, 0);" class="button-text">', text, '</div></a></div></div>')
  cat(buttonHTML)
}


```

```{r }


mm_number <- df_lga_useful_props %>% filter(zone_short_mm == "Missing middle") %>% nrow() %>% prettyNum(big.mark = ",")
rgz_number <- df_lga_useful_props %>% filter(zone_short_mm == "Residential growth") %>% nrow() %>% prettyNum(big.mark = ",")
grz_number <- df_lga_useful_props %>% filter(zone_short_mm == "General residential") %>% nrow() %>% prettyNum(big.mark = ",")


```

In `r area_name`, `r mm_number` lots would be upzoned to the Missing Middle Zone (MMZ), enabling six-storey medium-density near all transit. A further `r rgz_number` properties will be rezoned from General Residential Zone (GRZ) to Residential Growth (RGZ), and `r grz_number` from Neighbourhood Residential Zone (NRZ) to GRZ. 

Broad upzoning is needed across existing suburbs so that there is more land available to build homes for our children to live in. If only a few select areas are rezoned, then developers will be able to buy up that land and withhold supply. Broad upzoning of land across inner-Melbourne removes any power developers may have to speculate, and lowers housing costs for all.

## Upzoning `r area_name`  {.tabset}

The answer to the housing supply shortage will not be found in this handful of designated activity centres and precincts. `r area_name` needs to do its bit by delivering beautiful mid-rise homes near every one of its train and tram stops. 

Through broad transit-oriented upzoning and development, `r area_name` can deliver housing abundance and provide more housing choices to all current and future residents across the entirety of the city. This will fulfil the original goal of Plan Melbourne creating a vast array of 20-minute neighbourhoods, rather than a small number of scattered activity centres.

```{r }


mm_number <- df_lga_useful_props %>% filter(zone_short_mm == "Missing middle") %>% nrow() %>% prettyNum(big.mark = ",")
rgz_number <- df_lga_useful_props %>% filter(zone_short_mm == "Residential growth") %>% nrow() %>% prettyNum(big.mark = ",")
grz_number <- df_lga_useful_props %>% filter(zone_short_mm == "General residential") %>% nrow() %>% prettyNum(big.mark = ",")


```

In `r area_name` missing middle upzoning will have the following effect:

* `r mm_number` lots would be upzoned to the Missing Middle Zone (MMZ), enabling 6 storeys near all tram stops and train stations

*  `r rgz_number` properties will be rezoned from General Residential Zone (GRZ) to Residential Growth (RGZ), enabling 4 storeys where 3 is currently permitted

*  `r grz_number` from Neighbourhood Residential Zone (NRZ) to GRZ, enabling 3 storeys where 2 is currently permitted

Broad upzoning is needed across existing suburbs so that there is more land available to build homes for our children to live in. If only a few select areas are rezoned, then developers will be able to buy up that land and withhold supply. Broad upzoning of land across inner-Melbourne removes any power developers may have to speculate, and lowers housing costs for all.


### New zoning

```{r}
make_map(sf_lga_props,"category_new")
```


### Existing zoning

```{r}
make_map(sf_lga_props,"category")
```

## More zoned capacity for homes in `r params$area`

```{r}
zoned_capacity_x <- lga_summary %>% 
  mutate( change_to_zoned_capacity = paste0(round(change_to_zoned_capacity,1),"x")) %>% 
  pull(change_to_zoned_capacity)
```

There are `r parcels` parcels of land in `r params$area`. But not every piece of land can have housing on it. Of these parcels: 

* `r fois` are on civic land like schools, hospitals, or train stations where development is challenging. 

* Another `r bad_zoning` are in zones that do not allow housing to be built. 

* Finally `r already_developed` lots have already been developed with more than 1 unit, making re-development difficult. 

That leaves `r df_lga_useful_props_num` parcels that are available for development. The size of these lots is `r prettyNum(sum(df_lga_useful_props$lot_size),big.mark = ",")` square meters, or `r round(as.numeric(sum(df_lga_useful_props$lot_size))/mcg_size)` MCGs worth of space to build dense housing. 

Under existing zoning, `r area_name` has an estimated zoned capacity of `r prettyNum(round(lga_summary$zoned_capacity,-3), big.mark = ",")`. 

YIMBY Melbourne's plan for `r area_name` increases its zoned capacity by `r zoned_capacity_x`, to `r prettyNum(round(lga_summary$mm_zoned_capacity,-3), big.mark = ",")` — enabling many more opportunities for dense housing to be built across the entire city.


## Housing targets for `r params$area` 

Even though there are `r prettyNum(round(lga_summary$mm_zoned_capacity,-3), big.mark = ",")` possible units that could be built in `r area_name`, it's impossible for them to be built all at once. It is also not reasonable to assume that all possible units will ever be built, which is [The importance of excess zoned capacity]. 

For each lot in `r area_name`, we calculated whether it would be profitable to build housing under upzoning. We estimate that a potential __`r prettyNum(round(lga_summary$profitable_apartments,-3), big.mark = ",")` units__ could be built profitably in `r area_name`. 

To contribute its fair share to the the statewide target of 80,000 new homes per year, `r area_name` must build  **`r prettyNum(round(lga_summary$mm_target,-3), big.mark = ",")` units** per year.^1^ 

*^1^ This figure is in addition to homes that would be built as part of any rezoning process such as through Fishermans' Bend or the Suburban Rail Loop precincts.*


## `r area_name` is falling behind due to restrictive zoning {.tabset}

`r area_name` needs the missing middle rezoning, because under current zoning the LGA is not keeping up with population growth. 

While there has been some housing construction, many homes have more bedrooms free than ever before as children move out of home. As such, the total number of homes is struggling to keep up with Melbourne's evolving housing needs. 

```{r}

#source("R/import_lga_pop_data.R")

mel_total <- lga_pop_change_importer(area_name, type = "population")


lga_change <- mel_total %>% 
  filter(year == 2021,
         lga_name_2021 == area_name) %>%
  pull(change)

mel_change <- mel_total %>% 
  filter(year == 2021,
         lga_name_2021 == "All of Melbourne") %>%
  pull(change)


  
change_ratio <- lga_change/mel_change

## TODO - get PT stops per LGA. 

text_on_growth <- case_when(change_ratio >.9 ~ paste0(params$area, " has been building housing, but cannot rest on its laurels."),
                            change_ratio >.7 ~ paste0(params$area, " has been building some housing, but it is still barely keeping up with the average for Melbourne."),
                            T ~ paste0(params$area, " is falling well behind the average for new housing in Melbourne.")
)

```

`r text_on_growth` The area has good public transport running through it, and it needs to do more to ensure that housing is abundant around this infrastructure. 

```{r}
mel_total %>%
  ggplot(aes( x= year, y = change,
              colour = lga_name_2021))+
  geom_line(stat = "identity",linewidth = 1)+
  theme_yimby_mel_caption(caption = "source: ABS. ",
                          text_size = "small",
                          plot_type = "line",
                          colour_scale = "c")+
  labs(title = paste("Growth in homes for",area_name,"compared to the rest of Melbourne"),
       subtitle = "Growth in census dwellings since 2006",
       labs = element_blank(),
       colour = "Area",
       x = element_blank(),
       y = element_blank())+
  scale_y_continuous(labels = scales::percent_format())


```

The reason `r area_name` is not building enough housing is because there are not enough areas where housing can be built. The graph below shows that the majority of land in `r area_name` is locked away, preventing "Missing Middle" density from being unlocked.

### By number of lots

```{r}

dwellings_by_type <- df_lga_useful_props %>%
  group_by(category) %>% 
  summarise(n = n(),
            lot_size = sum(lot_size),
            .groups = "drop") %>% 
  group_by(category) %>% 
  mutate(n_total = sum(n),
         lot_size_total = sum(lot_size))  %>% 
  ungroup() 

dwellings_by_type %>% 
  mutate(category = fct_reorder(category,n_total)) %>% 
  ggplot(aes(x = category, 
             y = n))+
  coord_flip()+ 
  geom_bar(stat = "identity")+
  theme_yimby_mel_caption(text_size = "small",plot_type = "bar",colour_scale = "light_dark") +
  labs(x = element_blank(),
       title = paste0("Land in ",area_name," by type"),
       y = "Number of properties",
       fill = "Heritage status")

```

### By total area

```{r by total area 03}
dwellings_by_type %>% 
    mutate(category = fct_reorder(category,lot_size_total)) %>%
  ggplot(aes(x = category, 
             y = lot_size_total))+
  coord_flip()+ 
  geom_bar(stat = "identity")+
  theme_yimby_mel_caption(text_size = "small",plot_type = "bar",colour_scale = "light_dark") +
  labs(x = element_blank(),
       title = paste0("Land in ",area_name," by type"),
       y = "Area (sqm)",
       fill = "Heritage status")+
  scale_y_continuous(labels = scales::number_format(big.mark = ","))

```

### Table
```{r}
library(kableExtra)
library(gt)

dwellings_by_type_w_heritage <- df_lga_useful_props %>%
  group_by(category,heritage) %>% 
  summarise(n = n(),
            lot_size = sum(lot_size),
            .groups = "drop") %>% 
  group_by(category) %>% 
  mutate(n_total = sum(n),
         lot_size_total = sum(lot_size))  %>% 
  ungroup() %>% 
  mutate(heritage = if_else(heritage,
                            "Subject to heritage controls",
                            "Free from heritage"))

types_zonning <- df_lga_useful_props %>% 
  group_by(heritage) %>% 
  summarise(n = n(),
            lot_size = sum(lot_size)) %>% 
  mutate(category = "Total")%>% 
  mutate(heritage = if_else(heritage,
                            "Subject to heritage controls",
                            "Free from heritage"))


types_total_new <- df_lga_useful_props %>%
  filter(!feature_preventing_development,
         zoning_permits_housing == "Housing permitted",
         dwellings_est < 2) %>% 
  group_by(heritage) %>% 
  summarise(n = n(),
            lot_size = sum(lot_size),
            .groups = "drop") %>% 
  mutate(heritage = if_else(heritage,
                            "Subject to heritage controls",
                            "Free from heritage"),
         category = "Total where new housing can be built") 

dwellings_by_type_w_heritage %>% 
  bind_rows(types_zonning) %>% 
  bind_rows(types_total_new) %>% 
  group_by(category) %>% 
  mutate(`Share of properties that are heritage` = paste0(round(100*n/sum(n)),"%"),
         `Share of land that is heritage` =  paste0(round(100*lot_size/sum(lot_size)),"%")
         ) %>% 
  rename(`Number of properties` = n,
         `Area (sqm)` = lot_size,
         ` ` = heritage) %>% 
  select(-n_total,-lot_size_total) %>% 
    gt()  %>% 
  fmt_number(decimals = 0)
```

## Existing development controls 

```{r}

```

Of the `r prettyNum(round(lga_summary$profitable_apartments,-4), big.mark = ",")` potentially profitable apartments that could be built in `r area_name`, `r heritage_no` of these potential future homes are on lots subject to heritage controls. 

If heritage and neighbourhood character protections in `r area_name` are too far-reaching, it could potentially affect `r area_name`'s ability to meet its housing targets. 

We have outlined potential remedies for this [earlier in the report](#report-link).

[Return to LGA list](#report-link)

**An image here should end the article.**

<!--chapter:end:03-LGA_housing_targets-template.Rmd-->

