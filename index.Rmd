--- 
title: "Missing Middle Housing Targets – YIMBY Melbourne"
author: "YIMBY Melbourne"
date: "`r Sys.Date()`"
site: bookdown::bookdown_site
url: https://targets.yimby.melbourne/
documentclass: book
bibliography: [book.bib, packages.bib]
cover-image: "images/cover.jpg"
favicon: "images/favicon.png"
description: |
  Melbourne's planning system is broken. We need evidence-driven 
  and well-enforced housing targets in order to fix this ongoing crisis.
link-citations: yes
# github-repo: rstudio/bookdown-demo
output:
  includes:
    in_header: header.html
  
---
# Missing Middle Housing Targets
```{r setup, include=FALSE}

knitr::opts_chunk$set(message = FALSE, warning = FALSE, error = FALSE, echo = FALSE, dpi = 300,fig.width = 7, fig.height = 4)
#knitr::opts_knit$set(root.dir= '../')   
knitr::opts_chunk$set(dev.args=list(bg='transparent'))
knitr::opts_chunk$set(dev = "ragg_png")

# Corrected function to generate a button with customizable text and link
generateButton <- function(text, link) {
  buttonHTML <- paste0('<div class="button-row"><div style="opacity: 1; transform: translate3d(0px, 0px, 0px) scale3d(1, 1, 1) rotateX(0deg) rotateY(0deg) rotateZ(0deg) skew(0deg); transform-style: preserve-3d;" class="button-wrapper"><a href="', link, '" class="button-fullwidth-2 w-inline-block"><div style="width: 0%; height: 2px;" class="bottom-line-2"></div><div style="height: 0%; width: 2px;" class="left-line-2"></div><div style="width: 0%; height: 2px;" class="top-line-2"></div><div style="height: 0%; width: 2px;" class="right-line-2"></div><div style="height: 0%; width: 538.617px;" class="overlay-colr-button-2"></div><div style="color: rgb(0, 0, 0);" class="button-text">', text, '</div></a></div></div>')
  cat(buttonHTML)
}


all_zoned_numbers <- lga_zoning_numbers %>% summarise(across(is.numeric, sum))

mm_zoned_capacity <- all_zoned_numbers %>% pull(mm_zoned_capacity) 
total_zoned_capacity <- prettyNum(round(mm_zoned_capacity,-4),big.mark = ",") 

mm_zone_change <- all_zoned_numbers$mm_zoned_capacity/all_zoned_numbers$zoned_capacity

multiplier <- paste0(round(mm_zone_change,1),"x")

```
```{r}
htmltools::withTags(table(
  id = "lga-summary",
    tr(
      td(id = "lga-2", "Total target:"),
      td(id = "lga-1", paste0("40,000 homes/year"))
    ),
    tr(
      td(id = "lga-2", "Total housing capacity:"),
      td(id = "lga-1", "11,325,000 new homes")
    ),
  tr(
      td(id = "lga-2", "Total land to build new housing:"),
      td(id = "lga-1", "22,298 MCGs")
    ),
  )
)

```

```{r,fig.height=7,fig.width = 8}
map_data <- strayr::read_absmap("lga2022") %>% 
  filter(state_name_2021 == "Victoria") %>% 
    mutate(lga_name_2022 = str_remove_all(lga_name_2022, "\\s*\\(.*?\\)\\s*")) %>% 
    mutate(lga_name_2022 = if_else(lga_name_2022 == "Moreland","Merri-bek",lga_name_2022)) %>%  # Moreland changed name in 2021
  inner_join(lga_zoning_numbers) 

if(Sys.info()[[1]] == "Linux") {map_font_size = 22; map_lineheight = .15} else {map_font_size = 2; map_lineheight = 1}


#devtools::install_github("yutannihilation/ggsflabel")
map_data %>% 
  mutate(target = paste0(lga_name_2022,"\n",
                         prettyNum(round(mm_target,-2),
                                   big.mark = ","),
                         " homes")
         ) %>% 
  ggplot()+
  geom_sf(colour = yimby_colours$green_palette[4])+
  ggsflabel::geom_sf_label_repel(aes(label = target ),
                                 size = map_font_size,
                                 lineheight = map_lineheight,
                                 fill = yimby_colours$background)+
    labs(x = element_blank(),
         y = element_blank(),
         title = "Annual council area housing targets") +
  theme_yimby_mel_caption(text_size = "small",plot_type = "map")+
  theme(plot.margin = margin(2, 15,2, 15))+
  theme(panel.background = element_rect(fill = "transparent", colour = NA),  
        plot.background = element_rect(fill = "transparent", colour = NA))

```

### Planning for a better Melbourne
YIMBY Melbourne's plan for a better Melbourne involves four key steps:

1. Upzone inner-middle Melbourne, increasing zoned capacity by `r multiplier` to `r total_zoned_capacity` homes
2. Publish annual binding housing targets for the 19 LGAs where demand for infill housing is highest
3. Enforce housing targets through revenue-neutral 'carrot and stick' incentives
4. Deliver 40,000 new homes per year across inner-middle Melbourne


### An introduction to housing targets

Melbourne is growing. Our city's urgent need for more homes is clear to all Victorians, and yet most of the policy implemented to-date has been edge-tinkering: granny flats, Future Homes, and the scattered beginnings of outer-urban activity centres.

Since the introduction of [Plan Melbourne](https://www.planning.vic.gov.au/guides-and-resources/strategies-and-initiatives/plan-melbourne), the city has relegated new apartments to a tiny number of "activity centres" on the city's most polluted, noisy, and dangerous roads. 

Meanwhile, the best blocks of land—those located near public transport on quieter side streets—have been locked up under restrictive zoning and overlays, enforced by local governments on behalf of their most wealthy residents. 

Land speculators are happy because they can more easily buy up the lion's share of developable plots, while rich NIMBYs are also happy because their assets are protected. But this status quo is inequitable, it's eroding our social compact, and it's making our city worse. 

For Melbourne to remain a city that values the quality of life of its residents, we need to permit gentle density across each and every one of our most amenity-rich and productive regions, enabling new human-scale homes to be built where people want to live. 

People should not be restricted to a handful of arbitrarily-defined activity centres. Rather, they should be able to live across the entirety of the city, free to thrive as part of an interconnected network of 20-minute neighbourhoods across all 1,992 of Melbourne's tram stops and train stations.

Melbourne already has a plan to fix its missing middle: we laid it out within [_Melbourne's Missing Middle_](http://yimby.melbourne/missing-middle), where we demonstrated the overwhelming evidence of densification's social, environmental, and affordability benefits. 

**SUMMARY OF MMM REPORT: IMAGES**

This followup report codifies these benefits by outlining a new housing delivery paradigm across the 19 inner-city Melbourne councils where demand for denser living is highest. 

YIMBY Melbourne's missing middle reforms will introduce [fairer missing middle zoning](missing-middle-upzoning.html), underpinned by [enforced housing targets](implementing-housing-targets.html) for [each local council](council-targets-2024-25.html), ensuring that abundant housing is created city-wide, and for everyone.


### Annual housing targets
YIMBY Melbourne's evidence-based housing targets reflect the demand and capacity for housing growth across LGAs under more permissive zoning. 

```{r}
tbl_body  <- lga_zoning_numbers %>% 
  select(`Council`        = lga_name_2022,
         `Existing homes` = existing_dwellings,
         `Current density (homes per square km)`= existing_dwelling_density,
         `Annual housing growth (2016-2022)` = `Annual housing growth (2016-2022)`,
         `Housing target 2024–25` = mm_target,
         `Building increase required` = change_to_target_required) %>% 
  arrange(desc(`Building increase required`))

total = tbl_body %>% 
  summarise(across(any_of(c("Existing homes",
                            "Annual housing growth (2016-2022)",
                            "Housing target 2024–25")), sum)) %>%
  mutate(`Current density (homes square per km)` = `Existing homes`/sum(lga_zoning_numbers$areasqkm_2021),
        `Building increase required` = `Housing target 2024–25`/`Annual housing growth (2016-2022)`,
        `Council` = "Total") %>%
  relocate(names(tbl_body)) %>% 
  mutate(across(c("Existing homes",
                  "Annual housing growth (2016-2022)",
                  "Current density (homes per square km)",
                  "Housing target 2024–25"),~prettyNum(round(.x,-2),big.mark = ",")),
         `Building increase required` = paste0(round(`Building increase required`, 1),"x") )


html_table <- htmltools::HTML(
  paste0(
    '<table id="summary-table">',
    '<thead><tr><th>', paste(lapply(names(tbl_body), htmltools::htmlEscape), collapse = '</th><th>'), '</th></tr></thead>',
    '<tfoot><tr><th>', paste(lapply(total, htmltools::htmlEscape), collapse = '</th><th>'), '</th></tr></tfoot>',
    '</table>'
  )
)

tbl_body  %>% 
  mutate(across(c("Existing homes",
                  "Annual housing growth (2016-2022)",
                  "Current density (homes per square km)",
                  "Housing target 2024–25"),~round(.x,-2)))%>%
  datatable(
    container = as.character(html_table),
    options = list(dom = 't', pageLength = 20),
    rownames = FALSE,
    escape = FALSE
  ) %>%
  formatRound(columns = c(2, 3, 4), mark = ',', digits = 0) %>%
  formatPercentage(columns = 6) %>%
  formatStyle(
    columns = 'Building increase required',
    valueColumns = 'Building increase required',
    conditionalFormatting = '
      function(value, row, index) {
        if (value < 1) {
          return {
            backgroundColor: "transparent",
            color: "black",
            fontWeight: "normal",
            display: "N/A"
          }
        }
      }
    '
  )
```

Each LGA's target has been carefully calculated based on real-world information. The full target calculation methodology is available [later in this report](housing-targets-that-work.html#methodology).
